function pushMessagesToTheDomAndRemoveAllOfTheOldMessagesHahaWeeeeeeeeeeeeeeeeee(a){var b=$(".post-wrapper");b.empty();for(var c=0;c<a.length;c++){var d=$("<div/>",{"class":"panel panel-info"}),e=$("<div/>",{"class":"panel-heading"}),f=$("<div/>",{"class":"panel-body"}),g=$("<h3/>",{text:a[c].author+" said..."}),h=$("<p/>",{text:a[c].content});if(e.append(g),f.append(h),d.append(e),d.append(f),isAdmin){var i=$("<button/>",{"class":"btn btn-danger",text:"X","data-id":a[c]._id});e.append(i)}b.append(d)}}function populateMessages(){console.log("Requesting messages..."),$.ajax({type:"GET",url:"/message",success:function(a){pushMessagesToTheDomAndRemoveAllOfTheOldMessagesHahaWeeeeeeeeeeeeeeeeee(a),console.log(a)}})}function postMessage(a){var b=$("#"+a).val(),c=$(".user-name").text(),d={message:b,author:c};$.ajax({type:"POST",url:"/message",data:d,success:function(){console.log("Message POST Success")},error:function(){console.log("Message posting FAILED")},complete:function(){populateMessages()}})}function deleteMessage(a,b){$.ajax({type:"DELETE",url:"/message",data:a,statusCode:{204:function(){b.remove(),console.log("Post with id: "+a+"\nRemoved!")}}})}function displayPostUI(){$(".login-wrapper").fadeOut(function(){$(".message-utils").fadeIn()})}function loginHandler(){var a=$("#userField").val().toLowerCase(),b=$("#passField").val();if(a.length<1||b.length<1)return void alert("Please fill out both fields before submitting a request");var c={username:a,password:b};$.ajax({type:"POST",url:"/user/login",data:c,statusCode:{200:function(a){displayAlert("loginSuccess")},201:function(a){displayAlert("loginCreated")},400:function(a){displayAlert("loginFailed")}},success:function(a){$(".user-name").text(a.name),a.isAdmin&&(isAdmin=!0,populateMessages()),displayPostUI()}})}function displayAlert(a){$("#"+a).fadeIn().delay(3e3).fadeOut()}var isAdmin=!1;$(document).ready(function(){populateMessages(),$("#postMessage").on("click",function(){var a=$("#postArea");postMessage(a)}),$("#loginButton").on("click",function(){loginHandler()}),$("#submitButton").on("click",function(){postMessage("postArea")}),$("#refreshButton").on("click",function(){populateMessages()}),$(".post-wrapper").on("click","button",function(){var a=$(this).data("id"),b=$(this).parent().parent();deleteMessage(a,b)})});