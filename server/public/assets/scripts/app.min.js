function pushMessagesToTheDomAndRemoveAllOfTheOldMessages(a){var b=$(".post-wrapper");b.empty();for(var c=0;c<a.length;c++){var d=$("<div/>",{"class":"panel panel-info"}),e=$("<div/>",{"class":"panel-heading"}),f=$("<div/>",{"class":"panel-body"}),g=$("<h3/>",{text:a[c].author}),h=$("<p/>",{text:a[c].content});e.append(g),f.append(h),d.append(e),d.append(f),b.append(d)}}function populateMessages(){console.log("Requesting messages..."),$.ajax({type:"GET",url:"/message",success:function(a){pushMessagesToTheDomAndRemoveAllOfTheOldMessages(a),console.log(a)}})}function postMessage(a){var b=$("#"+a).val(),c=$(".user-name").text(),d={message:b,author:c};$.ajax({type:"POST",url:"/message",data:d,success:function(){console.log("Message POST Success")},error:function(){console.log("Message posting FAILED")},complete:function(){populateMessages()}})}function displayPostUI(){$(".login-wrapper").fadeOut(function(){$(".message-utils").fadeIn()})}function loginHandler(){var a=$("#userField").val().toLowerCase(),b=$("#passField").val();(a.length<1||b.length<1)&&alert("Please fill out both fields before submitting a request");var c={username:a,password:b};$.ajax({type:"POST",url:"/user/login",data:c,success:function(b){"success"==b?displayAlert("loginSuccess"):"created"==b&&displayAlert("loginCreated"),$(".user-name").text(a),displayPostUI()},error:function(a){displayAlert("loginFailed")}})}function displayAlert(a){$("#"+a).fadeIn().delay(3e3).fadeOut()}$(document).ready(function(){$("#postMessage").on("click",function(){var a=$("#postArea");postMessage(a)}),$("#loginButton").on("click",function(){loginHandler()}),$("#submitButton").on("click",function(){postMessage("postArea")})});